{% extends "base.html" %}
{% load static %}
{% load i18n %}

{% block title %}{{ evenement.titre }} | {% trans "Événements" %}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/evenements.css' %}">
{% endblock %}

{% block content %}
<div class="container py-5">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
       
      
            <li class="breadcrumb-item active" aria-current="page">{{ evenement.titre }}</li>
        </ol>
    </nav>

    <div class="event-detail card shadow">
        {% if evenement.is_past %}
            <div class="event-badge past-event">{% trans "Événement passé" %}</div>
        {% elif evenement.is_ongoing %}
            <div class="event-badge ongoing-event">{% trans "En cours" %}</div>
        {% endif %}
        
        <div class="row g-0">
            {% if evenement.image %}
                <div class="col-md-5">
                    <div class="event-image-container">
                        <img src="{{ evenement.image.url }}" class="event-image img-fluid rounded-start" alt="{{ evenement.titre }}">
                    </div>
                </div>
                <div class="col-md-7">
            {% else %}
                <div class="col-12">
            {% endif %}
                <div class="card-body p-4">
                    <h1 class="card-title mb-3">{{ evenement.titre }}</h1>
                    
                    <div class="event-meta mb-4">
                        <div class="event-date">
                            <i class="bi bi-calendar-event me-2"></i>
                            {% if evenement.date_debut.date == evenement.date_fin.date %}
                                <strong>{{ evenement.date_debut|date:"l j F Y" }}</strong>
                                <br>
                                {% trans "De" %} {{ evenement.date_debut|date:"H:i" }} {% trans "à" %} {{ evenement.date_fin|date:"H:i" }}
                            {% else %}
                                <strong>{% trans "Du" %} {{ evenement.date_debut|date:"j F Y - H:i" }}</strong>
                                <br>
                                {% trans "au" %} {{ evenement.date_fin|date:"j F Y - H:i" }}
                            {% endif %}
                        </div>
                        
                        {% if evenement.lieu %}
                        <div class="event-location mt-2">
                            <i class="bi bi-geo-alt me-2"></i>
                            {{ evenement.lieu }}
                        </div>
                        {% endif %}
                        
                        <div class="event-duration mt-2">
                            <i class="bi bi-clock me-2"></i>
                            {% blocktrans with duration=evenement.duration %}Durée: {{ duration }} heures{% endblocktrans %}
                        </div>
                    </div>
                    
                    {% if not evenement.is_past %}
                    <div class="mb-4">
                        <a href="#" class="btn btn-primary btn-lg">{% trans "S'inscrire" %}</a>
                        <a href="#" class="btn btn-outline-secondary ms-2">
                            <i class="bi bi-calendar-plus"></i> 
                            {% trans "Ajouter au calendrier" %}
                        </a>
                    </div>
                    {% endif %}
                    
                    <div class="event-share mb-4">
                        <span class="me-3">{% trans "Partager:" %}</span>
                        <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}" class="social-share-link" target="_blank">
                            <i class="bi bi-facebook"></i>
                        </a>
                        <a href="https://twitter.com/intent/tweet?url={{ request.build_absolute_uri }}&text={{ evenement.titre|urlencode }}" class="social-share-link" target="_blank">
                            <i class="bi bi-twitter"></i>
                        </a>
                        <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ request.build_absolute_uri }}" class="social-share-link" target="_blank">
                            <i class="bi bi-linkedin"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card-body p-4 border-top">
            <h2 class="mb-4">{% trans "À propos de cet événement" %}</h2>
            <div class="event-description">
                {{ evenement.description|linebreaks }}
            </div>
        </div>
        <a
              href="{% url 'dashboard' %}"
              class="inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors"
            >
              <svg
                class="-ml-1 mr-2 h-5 w-5 text-gray-500"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
                fill="currentColor"
                aria-hidden="true"
              >
                <path
                  fill-rule="evenodd"
                  d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z"
                  clip-rule="evenodd"
                />
              </svg>
              Retour aux evenements
            </a>
        {% if related_events %}
        <div class="card-body p-4 border-top">
            <h3 class="mb-4">{% trans "Événements similaires" %}</h3>
            <div class="row">
                {% for event in related_events %}
                <div class="col-md-4 mb-3">
                    <div class="card h-100">
                        {% if event.image %}
                        <img src="{{ event.image.url }}" class="card-img-top" alt="{{ event.titre }}">
                        {% endif %}
                        <div class="card-body">
                            <h5 class="card-title">{{ event.titre }}</h5>
                            <p class="text-muted">{{ event.date_debut|date:"j F Y" }}</p>
                            <a href="{{ event.get_absolute_url }}" class="stretched-link"></a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/evenements.js' %}"></script>
{% endblock %}